import{_ as x,o as d,c as r,a as e,l as B,m as w,t as g,q as N,b as _,x as C,y as F,p as j,j as E,d as f,z as k,e as h,v as y,A,B as T,C as O,D as p,E as L,F as D,H as V,I as M,J as H,K as U,L as q,M as I,N as S,O as K,P as J}from"./index-5759dc49.js";const P={},Y={class:"w-6 h-6 text-white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},G=e("path",{d:"M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95 1.414-1.414z"},null,-1),Q=[G];function W(t,n){return d(),r("svg",Y,Q)}const X=x(P,[["render",W]]);const Z=t=>(j("data-v-5d24def8"),t=t(),E(),t),ee={class:"flex justify-between items-center p-4 mb-4 bg-white rounded-md shadow-md hover:shadow-lg transition duration-300"},te={class:"flex items-center"},se={class:"ml-6 text-center flex items-center"},oe={key:0,class:"text-xl flex items-center"},ne=Z(()=>e("span",{class:"text-xl font-bold temperature-icon"},[e("i",{class:"fas fa-thermometer-half"})],-1)),le={class:"ml-2"},ie={key:0},ae=["for"],de={class:"relative"},ce=["id","checked"],re={class:"w-12 h-6 bg-gray-300 rounded-full shadow-inner"},ue={__name:"CardDevice",props:{device:Object,createDevice:Boolean},setup(t){const n=t,u=B({isActive:n.device.Value==="ON"}),l=async o=>{const s=n.device.Value==="ON"?"OFF":"ON";await C("Devices",o,{Value:s}),u.isActive=s==="ON"},m=async()=>{await F("Devices",n.device.id)},c=o=>window.open(`http://localhost:5174/${o}`,"_blank");return(o,s)=>(d(),r("div",ee,[e("div",te,[e("p",{onClick:s[0]||(s[0]=v=>c(t.device.id)),class:w({"text-green-500 font-medium active":t.device.Value==="ON","text-red-500 font-medium inactive":t.device.Value==="OFF"})},g(t.device.Name),3),e("div",se,[t.device.Type==="Sensor"?(d(),r("p",oe,[ne,e("span",le,g(t.device.Value)+"º",1)])):N("",!0)])]),t.device.Type==="Executor"?(d(),r("div",ie,[e("label",{for:`toggle-${t.device.id}`,class:"flex items-center cursor-pointer"},[e("div",de,[e("input",{id:`toggle-${t.device.id}`,type:"checkbox",class:"sr-only",checked:t.device.Value==="ON",onChange:s[1]||(s[1]=v=>l(t.device.id))},null,40,ce),e("div",re,[e("div",{class:w(["toggle-dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition",{active:t.device.Value==="ON"}])},null,2)])]),e("div",{class:w(["ml-3 font-medium text-lg",{"text-green-700 active":t.device.Value==="ON","text-red-700 inactive":t.device.Value==="OFF"}])},g(t.device.Value),3)],8,ae)])):N("",!0),e("div",null,[e("button",{class:w(["delete-button rounded-full p-2",{"bg-red-500 hover:bg-red-600":t.device.Value==="OFF","bg-green-500 hover:bg-green-600":t.device.Value==="ON"}]),onClick:m},[_(X)],2)])]))}},ve=x(ue,[["__scopeId","data-v-5d24def8"]]),me={class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},he={class:"bg-white p-6 rounded-lg shadow-lg"},fe=e("h2",{class:"text-lg font-medium mb-4"},"Add Device",-1),ge=["onSubmit"],_e={class:"flex flex-col"},be=e("label",{for:"name",class:"mb-1 font-medium"},"Name:",-1),xe={class:"flex flex-col"},pe=e("label",{for:"type",class:"mb-1 font-medium"},"Type:",-1),we=e("option",{value:"Sensor"},"Sensor",-1),ye=e("option",{value:"Executor"},"Executor",-1),$e=[we,ye],De={key:0,class:"flex flex-col"},Ne=e("label",{for:"value",class:"mb-1 font-medium"},"Value:",-1),Ce={key:1,class:"flex flex-col"},ke=e("label",{class:"mb-1 font-medium"},"Value:",-1),Ve={class:"col-span-2"},Re={__name:"ModalCreateDevice",props:{room:String},emits:["close-modal"],setup(t,{emit:n}){const u=t,l=f({name:"",type:"Executor",value:"OFF"}),m=()=>{l.value.name="",l.value.type="Sensor",l.value.value="",n("close-modal")},c=async()=>{const o={Name:l.value.name,Type:l.value.type,Value:l.value.value,Room:u.room};if((await T("Devices","Name",o.Name)).length>0){alert("Ya existe un dispositivo con ese nombre en esta habitación."),l.value.name="";return}else await O("Devices",o);n("close-modal")};return(o,s)=>(d(),r("div",me,[e("div",he,[fe,e("form",{class:"grid grid-cols-2 gap-4",onSubmit:k(c,["prevent"])},[e("div",_e,[be,h(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=v=>l.value.name=v),class:"p-2 rounded-lg border-gray-300",type:"text",required:""},null,512),[[y,l.value.name]])]),e("div",xe,[pe,h(e("select",{id:"type","onUpdate:modelValue":s[1]||(s[1]=v=>l.value.type=v),class:"p-2 rounded-lg border-gray-300",required:""},$e,512),[[A,l.value.type]])]),l.value.type==="Sensor"?(d(),r("div",De,[Ne,h(e("input",{id:"value","onUpdate:modelValue":s[2]||(s[2]=v=>l.value.value=v),class:"p-2 rounded-lg border-gray-300",type:"number",required:""},null,512),[[y,l.value.value]])])):(d(),r("div",Ce,[ke,e("button",{class:w(["bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg",l.value.value==="OFF"?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"]),onClick:s[3]||(s[3]=k(v=>l.value.value=l.value.value==="OFF"?"ON":"OFF",["prevent"]))},g(l.value.value),3)])),e("div",Ve,[e("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg",onClick:s[4]||(s[4]=(...v)=>o.handleSubmit&&o.handleSubmit(...v))}," Add Device "),e("button",{type:"button",class:"ml-4 text-gray-600 font-medium py-2 px-4 rounded-lg",onClick:m}," Cancel ")])],40,ge)])]))}},Se={},Fe={class:"text-white w-8 h-8 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Oe=e("path",{"fill-rule":"evenodd",d:"M2 2a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V4a2 2 0 00-2-2H2zm0 2h16v8H2V4zm0 10v2a2 2 0 002 2h12a2 2 0 002-2v-2H2z","clip-rule":"evenodd"},null,-1),Me=[Oe];function ze(t,n){return d(),r("svg",Fe,Me)}const Be=x(Se,[["render",ze]]),je={},Ee={class:"w-5 h-5 fill-current inline-block mr-2",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Ae=e("path",{d:"M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm4 10a1 1 0 01-1 1h-3v3a1 1 0 01-2 0v-3H7a1 1 0 010-2h3V7a1 1 0 012 0v3h3a1 1 0 011 1z"},null,-1),Te=[Ae];function Le(t,n){return d(),r("svg",Ee,Te)}const He=x(je,[["render",Le]]),Ue={class:"bg-white rounded-lg shadow-md overflow-hidden"},qe={class:"bg-gray-900 h-32 w-full flex items-center justify-center"},Ie={class:"text-white text-2xl"},Ke={class:"relative ml-4"},Je=e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),e("path",{d:"M9 22V14m0-4V6m6 8l3 1.5m0 0L15 14m3-1.5L15 11"})],-1),Pe=[Je],Ye=e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),Ge=[Ye],Qe={class:"p-6"},We=e("h3",{class:"text-lg font-semibold mb-2"},"Description:",-1),Xe={class:"text-gray-600 mb-4"},Ze=e("h3",{class:"text-lg font-semibold mb-2"},"Devices:",-1),et={class:"grid grid-cols-1 gap-4"},tt=e("span",null,"Create Device",-1),st={key:0},ot={class:"mt-8 flex justify-end"},nt={class:"flex items-center justify-center min-h-screen"},lt={class:"bg-white w-96 rounded-lg shadow-lg p-6"},it=e("h2",{class:"text-2xl font-semibold mb-4"},"Delete Room",-1),at=e("p",{class:"text-gray-600 mb-4"}," Are you sure you want to delete this room and all of its devices? ",-1),dt={class:"flex justify-end"},ct={class:"flex items-center justify-center min-h-screen"},rt={class:"bg-white w-96 rounded-lg shadow-lg p-6"},ut=e("h2",{class:"text-2xl font-semibold mb-4"},"Move Devices",-1),vt=e("p",{class:"text-gray-600 mb-4"}," Select a room to move the devices to: ",-1),mt={class:"grid grid-cols-1 gap-4"},ht=["onClick"],ft={class:"flex justify-end mt-4"},gt={__name:"CardRoom",props:{id:String,Name:String,Description:String,device:Object,rooms:Array},setup(t){const n=t,u=f(!1),l=f(""),m=f(!1),c=f(!1),o=f(!1),s=async()=>{F("Rooms",n.id),H("Devices","Room",n.Name),m.value=!1},v=async $=>{await U("Devices","Room",n.Name,{Room:$}),o.value=!1},b=async($,i,a)=>{await C("Rooms",i,{Name:a}),(await q("Devices")).forEach(R=>{R.data().Room===$&&C("Devices",R.id,{Room:a})})};return($,i)=>(d(),r(D,null,[e("div",Ue,[e("div",qe,[_(Be),e("h2",Ie,g(t.Name),1),e("div",Ke,[h(e("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>l.value=a),onKeydown:i[1]||(i[1]=L(a=>b(t.Name,t.id,l.value),["enter"])),onBlur:i[2]||(i[2]=a=>b(t.Name,t.id,l.value)),class:"text-gray-900 text-2xl font-bold w-full px-2 py-1 rounded-lg border-2 border-gray-300 outline-none transition duration-500 ease-in-out transform hover:border-blue-500 hover:scale-105"},null,544),[[p,u.value],[y,l.value]]),h(e("button",{onClick:i[3]||(i[3]=a=>u.value=!0),class:"ml-2 focus:outline-none"},Pe,512),[[p,!u.value]]),h(e("button",{onClick:i[4]||(i[4]=a=>{u.value=!1,b(t.Name,t.id,l.value)}),class:"ml-2 focus:outline-none"},Ge,512),[[p,u.value]])])]),e("div",Qe,[We,e("p",Xe,g(t.Description),1),Ze,e("div",et,[(d(!0),r(D,null,V(t.device,a=>(d(),M(ve,{key:a.id,device:a},null,8,["device"]))),128)),e("button",{onClick:i[5]||(i[5]=a=>c.value=!0),class:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg shadow-md"},[_(He),tt]),c.value?(d(),r("div",st,[_(Re,{room:n.Name,showModal:!0,onCloseModal:i[6]||(i[6]=a=>c.value=!1)},null,8,["room"])])):N("",!0)]),e("div",ot,[e("button",{onClick:i[7]||(i[7]=a=>o.value=!0),class:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg ml-4"}," Move Devices "),e("button",{onClick:i[8]||(i[8]=a=>m.value=!0),class:"bg-white hover:bg-gray-100 text-red-500 font-medium py-2 px-4 border border-red-500 rounded-md transition duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50"}," Delete Room ")])]),h(e("div",{class:"fixed z-10 inset-0 overflow-y-auto",onClick:i[10]||(i[10]=a=>m.value=!1)},[e("div",nt,[e("div",lt,[it,at,e("div",dt,[e("button",{onClick:i[9]||(i[9]=a=>m.value=!1),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg mr-2"}," Cancel "),e("button",{onClick:s,class:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg"}," Delete ")])])])],512),[[p,m.value]])]),h(e("div",{class:"fixed z-10 inset-0 overflow-y-auto",onClick:i[12]||(i[12]=a=>o.value=!1)},[e("div",ct,[e("div",rt,[ut,vt,e("div",mt,[(d(!0),r(D,null,V(t.rooms,a=>(d(),r("div",{key:a.id},[a.Name!==t.Name?(d(),r("button",{key:0,onClick:z=>v(a.Name),class:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg"},g(a.Name),9,ht)):N("",!0)]))),128))]),e("div",ft,[e("button",{onClick:i[11]||(i[11]=a=>o.value=!1),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg"}," Cancel ")])])])],512),[[p,o.value]])],64))}},_t=["onSubmit"],bt={class:"flex items-center mb-2"},xt=e("label",{for:"name-room",class:"w-1/4 text-gray-600"},"Name:",-1),pt={class:"flex items-center mb-2"},wt=e("label",{for:"description-room",class:"w-1/4 text-gray-600"},"Description:",-1),yt=e("button",{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"},"Create",-1),$t={__name:"FormCreateRoom",setup(t){const n=f(""),u=f(""),l=async()=>{const m={Name:n.value,Description:u.value};await O("Rooms",m),n.value="",u.value=""};return(m,c)=>(d(),r("form",{onSubmit:k(l,["prevent"]),class:"mb-6"},[e("div",bt,[xt,h(e("input",{id:"name-room",type:"text","onUpdate:modelValue":c[0]||(c[0]=o=>n.value=o),class:"w-3/4 px-2 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[y,n.value]])]),e("div",pt,[wt,h(e("input",{id:"description-room",type:"text","onUpdate:modelValue":c[1]||(c[1]=o=>u.value=o),class:"w-3/4 px-2 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[y,u.value]])]),yt],40,_t))}},Dt={},Nt={xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mt-4",viewBox:"0 0 20 20",fill:"currentColor"},Ct=e("path",{"fill-rule":"evenodd",d:"M3 3a2 2 0 00-2 2v8a2 2 0 002 2h7v-2H5V5h10v2h2V5a2 2 0 00-2-2H3z","clip-rule":"evenodd"},null,-1),kt=[Ct];function Vt(t,n){return d(),r("svg",Nt,kt)}const Rt=x(Dt,[["render",Vt]]),St={},Ft={xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mt-4",viewBox:"0 0 20 20",fill:"currentColor"},Ot=e("path",{"fill-rule":"evenodd",d:"M4.732 9.732a2 2 0 00-2.828 2.828l3.536 3.536a2 2 0 002.828 0l3.536-3.536a2 2 0 10-2.828-2.828L10 11.172l-1.464-1.464a2 2 0 00-2.804 0z","clip-rule":"evenodd"},null,-1),Mt=e("path",{"fill-rule":"evenodd",d:"M13.268 10.268a2 2 0 002.828-2.828l-3.536-3.536a2 2 0 00-2.828 0L6.172 10.268a2 2 0 002.828 2.828L10 11.172l1.464 1.464a2 2 0 002.804 0z","clip-rule":"evenodd"},null,-1),zt=[Ot,Mt];function Bt(t,n){return d(),r("svg",Ft,zt)}const jt=x(St,[["render",Bt]]),Et={class:"p-12"},At={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},Tt=e("h2",{class:"text-3xl font-semibold mb-4 text-gray-800"},"Stats",-1),Lt={class:"grid grid-cols-2 gap-4"},Ht={class:"bg-blue-400 rounded-lg p-6 flex flex-col items-center justify-center text-white"},Ut={class:"text-2xl font-semibold"},qt=e("p",{class:"text-lg"},"Rooms",-1),It={class:"bg-purple-400 rounded-lg p-6 flex flex-col items-center justify-center text-white"},Kt={class:"text-2xl font-semibold"},Jt=e("p",{class:"text-lg"},"Devices",-1),Pt={class:"grid grid-cols-2 gap-6"},Gt={__name:"DashBoard",setup(t){const n=f([]);I(()=>{u()});const u=async()=>{await S("Rooms",c=>{n.value=[],c.forEach(o=>{const s={id:o.id,Name:o.data().Name,Description:o.data().Description,Devices:[]};n.value.push(s)}),S("Devices",o=>{l(n.value),o.forEach(s=>{const v={id:s.id,Name:s.data().Name,Value:s.data().Value,Type:s.data().Type,Room:s.data().Room};n.value.forEach(b=>{b.Name===v.Room&&b.Devices.push(v)})})})})},l=c=>{c.forEach(o=>o.Devices=[])},m=K(()=>n.value.map(c=>c.Devices).reduce((c,o)=>c+=o.length,0));return(c,o)=>(d(),r("div",Et,[e("div",At,[Tt,e("div",Lt,[e("div",Ht,[e("h3",Ut,g(n.value.length),1),qt,_(Rt)]),e("div",It,[e("h3",Kt,g(J(m)),1),Jt,_(jt)])])]),_($t),e("div",Pt,[(d(!0),r(D,null,V(n.value,s=>(d(),M(gt,{key:s.id,id:s.id,Name:s.Name,Description:s.Description,device:s.Devices,rooms:n.value},null,8,["id","Name","Description","device","rooms"]))),128))])]))}};export{Gt as default};
